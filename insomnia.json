{"_type":"export","__export_format":4,"__export_date":"2023-03-23T02:25:28.454Z","__export_source":"insomnia.desktop.app:v2022.7.5","resources":[{"_id":"req_341be98d5a964b6a9c10068e2498e852","parentId":"wrk_b669246938b04a169ca25bdcfa7da536","modified":1679411873633,"created":1679366295009,"url":"{{ _.address }}/diff","name":"Diff","description":"","method":"POST","body":{"mimeType":"text/plain","text":"diff --git a/scripts/deploy.sh b/scripts/deploy.sh\nindex a87fdd0..1b5ccb2 100755\n--- a/scripts/deploy.sh\n+++ b/scripts/deploy.sh\n@@ -222,9 +222,12 @@ function upgrade_nitro_tools() {\n \n # waits max 5 minutes for each deployment to succeed. fails otherwise\n function wait_deployments() {\n+    result=0\n     for deployment in $(kubectl get deployments -oname); do\n-        kubectl -n ${NAMESPACE} rollout status ${deployment} --timeout=300s || (print_k8s_status && exit 1)\n+        kubectl -n ${NAMESPACE} rollout status ${deployment} --timeout=300s || result=$?\n     done\n+    [ ${result} != 0 ] && print_k8s_status\n+    return ${result}\n }\n \n # prints relevant k8s data for analysis\n@@ -238,7 +241,6 @@ function print_k8s_status() {\n     kubectl -n ${NAMESPACE} describe pods\n }\n \n-\n # rollout applicable changes to the cluster\n function rollout() {\n     # resolve additional envs \ndiff --git a/scripts/upgrade-env.sh b/scripts/upgrade-env.sh\nindex c38ff67..9f4497e 100755\n--- a/scripts/upgrade-env.sh\n+++ b/scripts/upgrade-env.sh\n@@ -20,6 +20,8 @@ function cleanup() {\n   rm -rf ${SCRIPT_DIR}/ui-svr-image\n   rm -rf ${SCRIPT_DIR}/ps-svr-image\n   rm -rf ${SCRIPT_DIR}/ts-svr-image\n+\n+  exit $1\n }\n \n function validate_bundle() {\n@@ -182,6 +184,6 @@ function upgrade() {\n   deploy\n }\n \n-upgrade || (cleanup && exit 1)\n+upgrade || cleanup $?\n \n-cleanup\n+cleanup 0\n"},"parameters":[],"headers":[{"name":"Content-Type","value":"text/plain"}],"authentication":{},"metaSortKey":-1679366295009,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"wrk_b669246938b04a169ca25bdcfa7da536","parentId":null,"modified":1679365945300,"created":1679365945300,"name":"10x","description":"","scope":"collection","_type":"workspace"},{"_id":"req_9fc04ca126a34be3a5dc41c889b488b9","parentId":"wrk_b669246938b04a169ca25bdcfa7da536","modified":1679366286602,"created":1679365950293,"url":"{{ _.address }}/bitbucket","name":"Bitbucket webhook","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n\t\"pullrequest\": {\n\t\t\"id\": 1,\n\t\t\"title\": \"A test PR\",\n\t\t\"url\": \"https://bitbucket.org/\",\n\t\t\"author\": \"Test\",\n\t\t\"description\": \"Test\"\n\t}\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"}],"authentication":{},"metaSortKey":-1679365950294,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"env_1d72d9cf0656df8053ac6f3b9369ae9c25cd808f","parentId":"wrk_b669246938b04a169ca25bdcfa7da536","modified":1679366006327,"created":1679365945302,"name":"Base Environment","data":{"address":"http://localhost:8080"},"dataPropertyOrder":{"&":["address"]},"color":null,"isPrivate":false,"metaSortKey":1679365945302,"_type":"environment"},{"_id":"jar_1d72d9cf0656df8053ac6f3b9369ae9c25cd808f","parentId":"wrk_b669246938b04a169ca25bdcfa7da536","modified":1679365945302,"created":1679365945302,"name":"Default Jar","cookies":[],"_type":"cookie_jar"},{"_id":"spc_6ca8ced6d28848baa07c9d5e581c5c20","parentId":"wrk_b669246938b04a169ca25bdcfa7da536","modified":1679365945300,"created":1679365945300,"fileName":"10x","contents":"","contentType":"yaml","_type":"api_spec"},{"_id":"env_808ebd58371744df9db344ec08aa1ac3","parentId":"env_1d72d9cf0656df8053ac6f3b9369ae9c25cd808f","modified":1679366046648,"created":1679365992724,"name":"Local","data":{"address":"http://localhost:8080"},"dataPropertyOrder":{"&":["address"]},"color":null,"isPrivate":false,"metaSortKey":1679365992724,"_type":"environment"}]}